<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>실시간 팀원 경매 - 스네이크 드래프트</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b1020;
      --panel:#11162a;
      --panel-2:#0f1427;
      --line:#23314f;
      --line-2:#2a3558;
      --text:#e6edf7;
      --muted:#9fb0cc;
      --accent:#6ee7ff;
      --accent2:#c084fc;
      --good:#22c55e;
      --warn:#eab308;
      --bad:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:12px;
      background:var(--bg);
      color:var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
    }

    /* ====== 전체 3패널 레이아웃 ====== */
    .app-wrap{
      display:grid;
      grid-template-columns: 320px minmax(420px,1fr) 520px;
      gap:12px;
      height: calc(100vh - 24px);
    }
    @media (max-width: 1400px){
      .app-wrap{ grid-template-columns: 300px 1fr 460px; }
    }
    @media (max-width: 1100px){
      .app-wrap{
        grid-template-columns: 1fr;
        height:auto;
      }
    }

    .panel{
      background:var(--panel);
      border-radius:14px;
      box-shadow:0 0 0 1px var(--line);
      padding:12px;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height:0;
    }
    .panel-title{
      display:flex; align-items:center; gap:8px;
      font-weight:900; letter-spacing:.5px;
      font-size:16px;
    }
    .small{font-size:12px; color:var(--muted)}
    .hr{height:1px; background:var(--line); margin:4px 0}

    /* ====== 상단 바 ====== */
    .top-bar{
      display:flex; align-items:center; gap:10px;
      padding:6px 8px; border-radius:10px;
      background:var(--panel-2);
      box-shadow:0 0 0 1px var(--line);
    }
    .top-bar h1{font-size:18px; margin:0; font-weight:900;}
    select, input, button{
      background:#0f1730;
      border:1px solid var(--line-2);
      color:var(--text);
      padding:6px 8px;
      border-radius:8px;
      font-size:14px;
      outline:none;
    }
    button{cursor:pointer; font-weight:700;}
    button:disabled{opacity:.5; cursor:not-allowed;}

    /* ====== 운영자 컨트롤 ====== */
    .admin-box{
      background:var(--panel-2);
      border-radius:12px;
      padding:10px;
      box-shadow:0 0 0 1px var(--line);
      display:none;
      flex-direction:column;
      gap:8px;
    }
    .admin-row{display:flex; gap:8px; flex-wrap:wrap;}
    .btn-good{border-color:#1f6f46; background:#0b2c1c;}
    .btn-warn{border-color:#7a5a06; background:#251a00;}
    .btn-bad{border-color:#7a1f1f; background:#2a0b0b;}

    /* ====== 왼쪽: 팀 로스터 ====== */
    .team-card{
      background:var(--panel-2);
      border-radius:12px;
      padding:10px;
      box-shadow:0 0 0 1px var(--line);
      display:flex; flex-direction:column; gap:8px;
    }
    .team-header{
      display:flex; justify-content:space-between; align-items:center;
      font-weight:900;
    }
    .team-points{
      font-variant-numeric: tabular-nums;
      font-weight:900; color:#ff7a7a;
    }
    .team-row{
      display:flex; align-items:center; gap:8px;
      flex-wrap:wrap;
    }
    .slot{
      position:relative;
      width:56px; height:56px; border-radius:50%;
      background:#0b1020;
      box-shadow:0 0 0 2px #2b375a inset, 0 0 0 1px #000;
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
      font-size:10px; color:var(--muted);
    }
    .slot img{
      width:100%; height:100%; object-fit:cover;
    }
    .slot-label{
      position:absolute; bottom:-6px; left:50%; transform:translateX(-50%);
      background:#000a;
      padding:2px 6px; border-radius:999px;
      font-size:9px; font-weight:900;
      box-shadow:0 0 0 1px #000;
    }

    /* ====== 가운데: 현재 경매 ====== */
    .current-card{
      background:var(--panel-2);
      border-radius:12px;
      padding:12px;
      box-shadow:0 0 0 1px var(--line);
      display:grid;
      grid-template-columns: 160px 1fr;
      gap:12px;
    }
    .current-photo{
      width:160px; height:160px; border-radius:12px;
      background:#0b1020;
      box-shadow:0 0 0 1px var(--line);
      overflow:hidden;
    }
    .current-photo img{
      width:100%; height:100%; object-fit:cover;
    }
    .current-meta h2{
      margin:0 0 4px 0; font-size:22px; font-weight:900;
    }
    .meta-line{font-size:14px; color:var(--muted); margin-top:2px;}
    .turn-badge{
      display:inline-flex; align-items:center; gap:6px;
      background:#0f1730;
      border:1px solid var(--line-2);
      padding:4px 8px; border-radius:999px;
      font-weight:900; font-size:12px;
      box-shadow:0 0 0 1px #2a3558, 0 0 10px rgba(110,231,255,.15);
    }

    .status-chip{
      display:inline-flex; align-items:center; gap:6px;
      font-size:12px; font-weight:900;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background:var(--warn);
      box-shadow:0 0 8px rgba(234,179,8,.8);
    }
    .dot.bidding{ background:var(--good); box-shadow:0 0 8px rgba(34,197,94,.8);}
    .dot.finished{ background:var(--bad); box-shadow:0 0 8px rgba(239,68,68,.8);}

    .bid-box{
      background:var(--panel-2);
      border-radius:12px;
      padding:10px;
      box-shadow:0 0 0 1px var(--line);
      display:flex; flex-direction:column; gap:8px;
      min-height:0;
    }
    .bid-log{
      background:#0b1020;
      border-radius:10px;
      padding:8px;
      box-shadow:0 0 0 1px var(--line);
      overflow:auto;
      min-height:120px; max-height:260px;
      font-size:13px;
      line-height:1.45;
    }
    .bid-log .item{margin-bottom:2px;}
    .bid-input-row{
      display:flex; gap:8px; align-items:center;
    }
    .timer-bar{
      background:#0b1020;
      border-radius:10px;
      box-shadow:0 0 0 1px var(--line);
      padding:8px 10px;
      display:flex; align-items:center; justify-content:space-between;
      font-weight:900;
    }
    .timer-num{
      font-size:20px; letter-spacing:1px;
      color:#fff;
    }

    /* ====== 오른쪽: 그룹별 선수 명단 ====== */
    .group-roster-wrap{
      display:flex;
      flex-direction:column;
      gap:10px;
      overflow:auto;
      min-height:0;
    }
    .group-section{
      background:var(--panel-2);
      border-radius:12px;
      padding:8px;
      box-shadow:0 0 0 1px var(--line);
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .group-header{
      font-weight:900;
      font-size:13px;
      letter-spacing:.5px;
      color:#cfe3ff;
      background:#0f1730;
      border:1px solid var(--line-2);
      padding:6px 8px;
      border-radius:8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    .group-list{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      min-height:52px;
      padding-bottom:18px;
    }

    /* 아바타 카드 */
    .avatar{
      position:relative;
      width:52px; height:52px; border-radius:50%;
      background:#0b1020;
      box-shadow:0 0 0 2px #2b375a inset, 0 0 6px rgba(0,0,0,.8);
      overflow:hidden;
      flex:0 0 auto;
    }
    .avatar img{width:100%; height:100%; object-fit:cover;}
    .avatar.sold{opacity:.35; filter:grayscale(1);}
    .avatar.current{
      box-shadow:0 0 0 2px var(--good), 0 0 0 4px #86efac, 0 0 16px rgba(34,197,94,.8);
    }
    .avatar .badge{
      position:absolute; top:-6px; right:-6px;
      font-size:9px; font-weight:900;
      padding:2px 4px; border-radius:6px;
      background:#111827;
      border:1px solid #334155;
    }
    .badge.mvp{ background:#064e3b; color:#a7f3d0; border-color:#34d399;}
    .badge.new{ background:#78350f; color:#fde68a; border-color:#f59e0b;}

    .avatar .name-tip{
      position:absolute; bottom:-18px; left:50%; transform:translateX(-50%);
      font-size:10px; font-weight:900; white-space:nowrap;
      color:#cbd5e1;
      text-shadow:0 1px 2px #000;
    }
  </style>
</head>
<body>

  <div class="top-bar" style="margin-bottom:10px;">
    <h1>실시간 팀원 경매 · 스네이크 드래프트</h1>
    <div style="flex:1"></div>
    <label class="small" style="display:flex; align-items:center; gap:6px;">
      역할:
      <select id="role-select">
        <option value="viewer">관전(읽기전용)</option>
        <option value="leader1">팀장1</option>
        <option value="leader2">팀장2</option>
        <option value="leader3">팀장3</option>
        <option value="leader4">팀장4</option>
        <option value="operator">운영자</option>
      </select>
    </label>
  </div>

  <div class="app-wrap">

    <!-- ================== LEFT: Teams ================== -->
    <aside class="panel" id="teams-panel">
      <div class="panel-title">TEAM ROSTER <span class="small">낙찰 시 자동 이동</span></div>

      <div id="team-leader1" class="team-card"></div>
      <div id="team-leader2" class="team-card"></div>
      <div id="team-leader3" class="team-card"></div>
      <div id="team-leader4" class="team-card"></div>

      <div class="small">* 포지션 슬롯은 TOP/JGL/MID/BOT/SUP 순서</div>
    </aside>

    <!-- ================== CENTER: Current Auction ================== -->
    <main class="panel" id="auction-panel">
      <div class="panel-title">
        CURRENT AUCTION
        <span id="room-status-chip" class="status-chip">
          <span id="room-status-dot" class="dot"></span>
          <span id="room-status-text">대기중</span>
        </span>
        <div style="flex:1"></div>
        <span id="current-turn" class="turn-badge">-</span>
      </div>

      <!-- 운영자 전용 컨트롤 -->
      <section id="admin-controls" class="admin-box">
        <div class="panel-title" style="font-size:14px;">운영자 컨트롤</div>
        <div class="admin-row">
          <button id="btn-start-test" class="btn-warn">테스트 시작(낙찰 없음)</button>
          <button id="btn-start-real" class="btn-good">실제 경매 시작</button>
          <button id="btn-reset" class="btn-bad">포인트/로스터 리셋</button>
        </div>
        <div class="small">
          - 테스트 시작: 턴/타이머/입찰만 연습(선수·포인트 변경 없음)<br/>
          - 실제 시작: 자동 낙찰/팀 이동 진행<br/>
          - 리셋: 모든 팀 포인트·로스터·선수 상태 초기화 + 입찰 로그 삭제
        </div>
      </section>

      <section class="current-card">
        <div class="current-photo">
          <img id="current-player-photo" src="" alt="player" />
        </div>
        <div class="current-meta">
          <h2 id="current-player-name">-</h2>
          <div class="meta-line">
            포지션: <span id="current-player-role">-</span> /
            그룹: <span id="current-player-group">-</span>
          </div>
          <div class="meta-line">기본가: <span id="current-player-base">-</span></div>
          <div class="meta-line">상태: <span id="current-player-status">-</span></div>
          <div class="meta-line" id="current-player-bio">-</div>
        </div>
      </section>

      <section class="timer-bar">
        <div>TIME COUNT</div>
        <div class="timer-num"><span id="timer">-</span>s</div>
      </section>

      <section class="bid-box">
        <div class="panel-title" style="font-size:14px;">
          입찰 로그
          <div style="flex:1"></div>
          최고가: <span id="highest-amount">-</span> /
          <span id="highest-leader">-</span>
        </div>
        <div id="bid-log" class="bid-log"></div>

        <div class="bid-input-row">
          <input type="number" id="bid-amount" placeholder="입찰 금액" />
          <button id="bid-button" disabled>입찰</button>
          <span class="small" id="bid-hint">내 턴일 때만 입찰 가능</span>
        </div>
      </section>
    </main>

    <!-- ================== RIGHT: Roster (GROUP BASED) ================== -->
    <aside class="panel" id="roster-panel">
      <div class="panel-title">PLAYER LIST <span class="small">그룹별 명단</span></div>

      <div class="group-roster-wrap">
        <section class="group-section">
          <div class="group-header">A GROUP</div>
          <div class="group-list" id="roster-A"></div>
        </section>

        <section class="group-section">
          <div class="group-header">B GROUP</div>
          <div class="group-list" id="roster-B"></div>
        </section>

        <section class="group-section">
          <div class="group-header">C GROUP</div>
          <div class="group-list" id="roster-C"></div>
        </section>
      </div>

      <div class="small">* sold는 회색 처리 / 현재 경매 선수는 초록 강조</div>
    </aside>

  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
